Проектная работа "Веб-ларек"
Используемый стек: HTML, SCSS, TS.
Для сборки используется Webpack.
Подключены ESLint, Prettier.
Для работы с проектом используется коллекция, которую можно импортировать по ссылке: https://larek-api.nomoreparties.co/weblarek.postman.json. В коллекции не указан baseUrl, в качестве него необходимо указать адрес, где развёрнут сайт.

Структура проекта:

src/ — исходные файлы проекта
src/components/ — папка с JS компонентами
src/components/types/ - папка с кодом типов и интерфейсов
src/components/base/ — папка с базовым кодом
src/components/model/ — папка с кодом классов моделей
src/components/view/ — папка с кодом классов отображений
Важные файлы:

src/pages/index.html — HTML-файл главной страницы
src/types/model.ts — файл с типами моделей
src/types/api.ts — файл с типом вспомогательного API
src/types/view.ts — файл с типами отображений
src/index.ts — точка входа приложения
src/styles/styles.scss — корневой файл стилей
src/utils/constants.ts — файл с константами
src/utils/utils.ts — файл с утилитами
Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

npm install
npm run start
или

yarn
yarn start
Сборка
npm run build
или

yarn build
Описание проекта
В этом проекте реализован интернет-магазин с товарами для веб-разработчиков — Web-ларёк. В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ.
В данной работе используется модель MVP (Model-View-Presenter).

Базовый код
API
Для работы с API существует файл api.ts по пути "src/components/base/api.ts".
В нём содержатся следующие типы:

ApiListResponse<Type> - тип, описывающий структуру возвращаемого значения при запросе списка продуктов с сервера;
ApiPostMethods - тип с методами запросов к API, которые могут понадобится в работе;
Класс Api - класс, необходимый для работы с запросами к серверу.
Этот класс содержит два поля:

baseUrl - строка с ссылкой на сервер, которая доступна только для чтения;
options - опциональный параметр, который можно использовать для передачи дополнительных заголовков (элементов "headers") при запросах к серверу.
У этого класса есть три метода:

handleResponse(response: Response): Promise<object> - метод для первичной обработки полученного с сервера запроса;
get(uri: string), метод для получения данных с сервера;
post(uri: string, data: object, method: ApiPostMethods = 'POST') - метод для отправки данных на сервер.
Events
Для работы с событиями существует файл events.ts по пути "src/components/base/events.ts".
В этом файле есть типы:

EventName - тип для работы со строками и регулярными выражениями;
Subscriber - тип функций-наблюдателей;
EmitterEvent - тип со структурой события: включает в себя название события и информацию о нём.
Интерфейс брокера событий выглядит следующим образом:

interface IEvents {
    on<T extends object>(event: EventName, callback: (data: T) => void): void;
    emit<T extends object>(event: string, data?: T): void;
    trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void;
}
Класс EventEmitter имплементирует интерфейс IEvents.
Он содержит один атрибут, словарь, где ключи - названия событий, значения - множества слушателей. Также в этом классе содержатся следующие методы:

on - метод для подписки на событие;
off - метод для отписки от события;
emit - метод для уведомления подписчиков о наступлении события.
Список событий
События осуществляются с помощью функции класса EventEmitter. Элементы их перечисления (Enum Events):

SET_PRODUCTS = 'gallery:add products' - добавление списка продуктов в галерею;
TAKE_PRODUCT = 'basket:add product' - добавление продукта в корзину;
OPEN_BASKET = 'basket:open' - открытие модального окна корзины;
REMOVE_PRODUCT = 'basket:delete product' - удаление продукта в корзине по идентификатору;
CLEAR_BASKET = 'basket:clear' - очистка корзины;
CREATE_ORDER = 'order:create' - обработка нажатия на кнопку оформления товара в корзине;
ORDER_SUBMIT = 'order:submit' - обработка нажатия на кнопку "Далее" после выбора типа оплаты и адреса;
ACCEPT_ORDER = 'order:accept' - отправка данных о заказе на сервер;
SUCCESS_SUMBIT = 'success:submit' - нажатие на кнопку возвращения в галерею в окне завершения заказа;
CLEAR_ORDER = 'order:clear' - очистка заказа;
CHOOOSE_PRODUCT = 'product:select' - обработка клика по карточке продукта в галерее;
PREVIEW_CHANGE = 'preview:change' - открытие модального окна с информацией о товаре;
MODAL_WINDOW_OPEN = 'modal:open' - открытие модального окна;
MODAL_WINDOW_CLOSE = 'modal:close' - закрытие модального окна.
Типы
Добавлен тип PaymentType, который может принять одно из трёх значений: "online" при оплате картой, "upon receipt" при получении, null для нового, незаполненного заказа.

Интерфейсы моделей
IProduct
Интерфейс продукта.
Продукт - это основное наполнение сайта, то, что пользователь может выбрать и купить за какое-то количество синапсов.
Содержит следующие поля:

id - идентификатор товара, строка;
description - описание продукта, строка, пример: "Если планируете решать задачи в тренажёре, берите два.";
image - ссылка на изображение продукта, строка, пример: "/5_Dots.svg";
title - наименование продукта, строка, пример: "+1 час в сутках";
category - категория, строка, пример: "софт-скил";
price - цена товара в синапсах, число.
interface IProduct {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number | null;
}
IGallery
Интерфейс галереи.
Содержит следующие поля:

products - список продуктов, тип - IProduct[], массив интерфейсов продуктов;
total - количество продуктов, число.
interface IGallery {
    products: IProduct[];
    total: number;
}
IBasket
Интерфейс корзины.
Единственное поле:

products - массив продуктов IProduct[] с данными обо всех выбранных пользователем продуктами.
Методы:

addProduct(id: IProduct): void - метод добавления продукта в корзину;
removeProduct(id: string): void - метод удаления продукта из корзины;
clearBasket() : void - метод удаления всех продуктов из корзины.
interface IBasket {
    products: IProduct[];
    addProduct(id: IProduct): void;
    removeProduct(id: string): void;
    clearBasket() : void;
}
IOrder
Интерфейс заказа до его оформления.
Поля:

payment - тип оплаты, тип - PaymentType;
email - адрес электронной почты пользователя, строка, пример: "test@test.ru";
phone - телефон пользователя, строка, пример: "+71234567890";
address - адрес пользователя, строка, пример: "Spb Vosstania 1";
total - количество продуктов в заказе, число;
items - список с идентификаторами, массив строк.
Методы:

submitOrder() : void - метод отправки заказа;
resetOrder() : void - метод удаления всех данных из заказа.
interface IOrder {
    payment: PaymentType;
    email: string;
    phone: string;
    address: string;
    total: number;
    items: string[];
    submitOrder() : void;
    resetOrder() : void;
}
IAcceptedOrder
Интерфейс одобренного заказа, необходимый для работы с информацией, полученной с сервера после успешной оплаты. Конкретно в получившемся кейсе этот интерфейс не приносит много пользы, но он был бы ценным, если бы на нашем сервере была возможность авторизации и просмотра истории своих заказов. Поля:

id - идентификатор заказа, строка;
total - стоимость заказа в синапсах, число.
interface IAcceptedOrder {
    id: string;
    total: number;
}
Слой данных (Model)
Слой данных (Model) — данные, в которых отражена вся ценность приложения. Этот слой содержит значительную часть бизнес-логики. При изменении данные должны попадать в отображение.

Gallery
Галерея - это хранилище для всех продуктов. Модель галереи хранит данные обо всех продуктах, которые видны пользователю на сайте, - список, в качестве типа которого используется массив интерфейсов продуктов IProduct[], - и количество продуктов, которые находятся в галерее.
Методы:

Метод addProduct(product: IProduct): void используется для добавления одного продукта в галерею. Он принимает в себя один элемент с типом IProduct, так как для добавления продукта нужно знать все его составляющие.
Метод removeProduct(id: string): void удаляет один продукт из галереи. Этот метод принимает строку, идентификатор продукта, а затем использует его для удаления продукта из списка продуктов.
Оба метода при успешном завершении (если в addProduct передать продукт с корректно заполненными данными, а в removeProduct передать идентификатор, который есть в каком-либо продукте из списка галереи) влияют и на список продуктов, и на количество продуктов в галерее.

Basket
Корзина хранит данные о всех продуктах, которые пользователь выбрал на сайте. В идеале - с намерением купить, оформить заказ с этими товарами.
Модель корзины хранит словарь, который хранит связки идентификаторы продуктов и их количеств, выбранных пользователем.
Методы:

Метод addProduct(id: IProduct): void используется для того, чтобы добавить продукт в корзину, то есть, положить значение переданного продукта в массив products.
Метод removeProduct(id: string): void используется для удаления товара из корзины. Его принцип действия очень похож на предыдущий метод с небольшими изменениями: если в массиве продуктов нет того, у которого переданный идентификатор, то никаких дествий не происходит. Нельзя удалить того, чего нет. А вот если продукт с данным идентификатором найден, он удаляется из массива.
Метод clearBasket(): void очищает словарь выбранных продуктов. Этот метод будет использоваться после успешной оплаты заказа.
Корзина играет важную роль посредника между галереей и заказом.
Order
Модель заказа нужна для того, чтобы сохранить все данные о заказе перед отправкой запроса с этими данными на сервер.
В этой модели хранятся данные о типе оплаты, который характеризуется двумя фиксированныи значениями, некоторые данные пользователя в виде строк: адрес почты и номер телефона для связи, а также почтовый адрес, на который пользователь хочет оформить доставку заказа. Также модель заказа получает некоторые данные из корзины: стоимость всех выбранных товаров и их идентификаторы. Так как в корзине идентификаторы хранятся в виде словаря, массив нужно создать вручную с помощью вложенного цикла, который пробегает по словарю и переносит ключ в массив количество раз, равное значению этого ключа.
У этой модели есть пара методов:

Метод submitOrder() : void связывается с классом ShopApi для отправки POST-запроса на сервер, передачи данных с целью их дальнейшего хранения и, в идеальном варианте, использования;
Метод resetOrder(): void удаляет все данные о заказе, если пользователь удачно оплатил покупку.
Интерфейс для API
IShopApi
interface IShopApi {
    getProductList(): Promise<IGallery>;
    getProductItem(id: string): Promise<IProduct>;
    getOrder(): Promise<IOrder>;
}
Класс для API
ShopApi
В этой работе уже есть класс Api, но я создала ещё один класс, ShopApi, как надстройку над ним. Этот класс наследуется от класса Api и реализует методы, которые есть в коллекции Postman. У этого класса есть три атрибута:

getProductList(): Promise<IProduct[]> - метод, который получает данные обо всех продуктах с сервера;
getProductItem(id: string): Promise<IProduct> - метод, который получает информацию о продукте с переданным ему идентификатором;
getOrder(): Promise<IOrder> - метод, который отправляет данные о заказе на сервер.
Интерфейсы отображений
IView
interface IView {
    render(data?: object): HTMLElement;
}
IViewConstructor
Интерфейс-конструктор для создания новых объектов.

Содержит конструктор, принимающий HTML-разметку элемента, и события, которое можно навесить на данный элемент. Возвращает новый объект типа IView.
interface IViewConstructor {
    new (container: HTMLElement, events?: IEvents[]): IView
}
IModalView
interface IModalView {
    content: HTMLElement;
    open(): void;
    close(): void;
}
IFormView
interface IFormView {
    errorText: HTMLSpanElement;
}
IPageView
interface IPageView {
    productsInBusket: HTMLSpanElement;
    products: HTMLElement[];
}
IProductInCatalogView
interface IProductInCatalogView {
    category: HTMLSpanElement;
    title: HTMLHeadingElement;
    image: HTMLImageElement;
    price: HTMLSpanElement;
}
IProductFullView
interface IProductFullView {
    image: HTMLImageElement;
    category: HTMLSpanElement;
    title: HTMLHeadingElement;
    description: HTMLParagraphElement;
    price: HTMLSpanElement;
}
IBasketView
interface IBasketView {
    products: HTMLElement[];
    total: HTMLSpanElement;
}
IBasketItemView
interface IBasketItemView {
    id: HTMLSpanElement;
    title: HTMLSpanElement;
    price: HTMLSpanElement;
}
IOrderView
interface IOrderView {
    address: HTMLInputElement;
}
IContactsView
interface IContactsView {
    email: HTMLInputElement;
    phone: HTMLInputElement;
}
IAcceptedOrderView
interface IAcceptedOrderView {
    description: HTMLParagraphElement;
}
Слой отображения (View)
Слой отображения (View) — интерфейс для взаимодействия с пользователем. Его задача — выводить что-то на экран и генерировать события с действиями пользователя. Никаких решений тут не принимается.

View
Абстрактный класс, использующийся для того, чтобы избежать дублирования в классах.

Метод отображения элемента render(data?: object): HTMLElement принимает опциональный аргумент типа object, хранящий в себе данные об объекте. Метод возвращает HTML-разметку класса, заполненную переданными данными.
ModalView
Класс для работы с модальным окном.
Поля:

_closeButton - HTMLButtonElement, кнопка для закрытия модального окна;
content - HTMLElement, содержимое модального окна.
Методы:

open(): void - метод, который открывает модальное окно;
close(): void - метод, который закрывает открытое модальное окно и очищает все данные из модального окна.
Этот класс наследует метод render класса View.

FormView
Абстрактный класс для отображений, в которых могут возникать ошибки, связанные с некорректно введёнными данными. В данной работе - для отображений, соответствующих первым двум этапам обработк заказа: тем, где пользователь вводит тип оплаты, адрес и свои контактные данные, отображениям OrderView и ContactsView.
Поле:

errorText с типом HTMLSpanElement предназначено для подстановки сообщения об ошибке.
Я не нашла примеров ошибок в макете, но в двух шаблонах есть поле form__errors, в которое можно записать текстовые данные. Это поле создано для работы с элементом этого класса.
PageView
Класс для отображения страницы сайта. Поля:

_busketButton - HTMLButtonElement, кнопка, по нажатию на которую открывается модальное окно корзины;
productsInBusket - HTMLSpanElement, элемент, в который записывается количество продуктов в корзине;
products - HTMLElement[], список HTML-элементов с данными о продуктах, которые находятся на странице.
Этот класс является наследником View.

ProductInCatalogView
Класс, который реализует отображение продукта в галерее.
Поля:

category - HTMLSpanElement, хранящий информацию о категории продукта;
title - HTMLHeadingElement, заголовок с наименованием продукта;
image - HTMLImageElement, изображение продукта;
price - HTMLSpanElement, элемент со стоимостью товара в синапсах.
Этот класс является наследником View.

ProductFullView
Класс, который реализует отображение информации о продукте в модальном окне при клике на продукт.
Поля:

image - HTMLImageElement, изображение продукта;
category - HTMLSpanElement, хранящий информацию о категории продукта;
title - HTMLHeadingElement, заголовок с наименованием продукта;
description - HTMLParagraphElement, описание товара;
price - HTMLSpanElement, элемент со стоимостью товара в синапсах.
_button - HTMLButtonElement, кнопка, с помощью которой пользователь может добавить продукт в корзину.
Этот класс является наследником View.

BasketView
Класс, который реализует отображение информации об объектах в корзине.
Поля:

products - HTMLElement[], список продуктов с HTML-разметкой, полученной с помощью конструктора класса `BasketItemView;
total - HTMLSpanElement, элемент, в котором содержится стоимость всех продуктов в корзине в синапсах;
_button - HTMLButtonElement, кнопка, с помощью которой пользователь может начаь оформление заказа.
Этот класс является наследником View.

BasketItemView
Класс, который реализует отображение информации об одном объекте в корзине.
Поля:

id - HTMLSpanElement, порядковый номер товара в корзине;
title - HTMLSpanElement, элемент, содержащий название продукта;
price - HTMLSpanElement, элемент, содержащий стоимость товара в синапсах;
_button - HTMLButtonElement, кнопка для удаления товара из корзины.
Этот класс является наследником View.

OrderView
Класс, который реализует отображение модального окна на первом этапе оформления заказа.
Поля:

_buttonOnline - HTMLButtonElement, кнопка, нажатие на которую подразумевает выбор оплаты онлайн;
_buttonUponReceipt - HTMLButtonElement - кнопка, нажатие на которую подразумевает выбор оплаты при получении;
address - HTMLInputElement, поле ввода для адреса пользователя;
_buttonSubmit - HTMLButtonElement, кнопка для перехода на второй этап оформления заказа.
Этот класс наследует метод класса View и поле класса FormView.

ContactsView
Класс, который реализует отображение модального окна на втором этапе оформления заказа.
Поля:

email - HTMLInputElement, поле ввода для адреса почтовой почты;
phone - HTMLInputElement, поле ввода для номера телефона;
_button - HTMLButtonElement - кнопка для попытки отправки данных о заказе на сервер.
Этот класс наследует метод класса View и поле класса FormView.

AcceptedOrderView
Класс, который реализует отображение модального окна после успешной оплаты заказа.
Поле:

description - HTMLParagraphElement, поле, в котором выводится списанное количество синапсов.
Этот класс является наследником View.

Слой управления (Controller)
Cлушает события в пользовательском интерфейсе и принимает решение:

что с ними делать;
в какую модель отнести, чтобы она среагировала и поменялась.
В данной работе контроллер будет реализован с помощью вызова функций класса брокера событий в файле index.ts в корне проекта.